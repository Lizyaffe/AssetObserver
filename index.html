<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <title>Asset Spy</title>
    <style type="text/css">
        table {border-collapse: collapse;}
        td {padding: 10px;}
        .result {white-space: pre; font-family: monospace;}
    </style>
    <script type="text/javascript">
        function submitForm(form) {
            var url = '/api';
            var params = '';
            for (i = 0; i < form.elements.length; i++) {
                if (! form.elements[i].name) {
                    continue;
                }
                if (i > 0) {
                    params += '&';
                }
                params += encodeURIComponent(form.elements[i].name);
                params += '=';
                params += encodeURIComponent(form.elements[i].value);
            }
            var request = new XMLHttpRequest();
            request.open("POST", url, false);
            request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            request.send(params);
            var result = JSON.stringify(JSON.parse(request.responseText), null, 4);
            document.getElementById('request').textContent = document.location + url.substring(1) + '?' + params;
            form.getElementsByClassName("result")[0].textContent = result;
            return false;
        }
    </script>
</head>
<body>
<h3>Extended Asset APIs</h3>
<div id="request">[request url]</div><br>
<b>Get Status:</b><br/>
<form action="/api" method="POST" onsubmit="return submitForm(this);">
    <input type="hidden" name="requestType" value="getStatus"/>
    <table>
        <tr>
            <td colspan="2"><input type="submit" value="submit"/></td>
        </tr>
    </table>
    <div class="result"></div>
</form>
<hr>
<b>Get All Assets:</b><br/>
<form action="/api" method="POST" onsubmit="return submitForm(this);">
    <input type="hidden" name="requestType" value="getAllAssets"/>
    <table>
        <tr>
            <td colspan="2"><input type="submit" value="submit"/></td>
        </tr>
    </table>
    <div class="result"></div>
</form>
<hr>
<b>Get Account Balance:</b><br/>
<form action="/api" method="POST" onsubmit="return submitForm(this);">
    <input type="hidden" name="requestType" value="getAccountBalance"/>
    <table>
        <tr>
            <td>Account Id (numeric or NXT):</td>
            <td><input type="text" name="accountId"/></td>
        </tr>
        <tr>
            <td colspan="2"><input type="submit" value="submit"/></td>
        </tr>
    </table>
    <div class="result"></div>
</form>
<hr>
<b>Dividend Simulation:</b><br/>
<form action="/api" method="POST" onsubmit="return submitForm(this);">
    <input type="hidden" name="requestType" value="dividendSimulation"/>
    <table>
        <tr>
            <td>Asset Id:</td>
            <td><input type="text" name="assetId"/></td>
        </tr>
        <tr>
            <td>Ignore Issuer Account [true/false[false]]:</td>
            <td><input type="text" name="ignoreIssuerAccount"/></td>
        </tr>
        <tr>
            <td>Date [YYYYMMDD]:</td>
            <td><input type="text" name="balanceDate"/></td>
        </tr>
        <tr>
            <td>Dividend Amount:</td>
            <td><input type="text" name="dividendAmount"/></td>
        </tr>
        <tr>
            <td>Threshold:</td>
            <td><input type="text" name="threshold"/></td>
        </tr>
        <tr>
            <td colspan="2"><input type="submit" value="submit"/></td>
        </tr>
    </table>
    <div class="result"></div>
</form>
<b>Get Asset Movements:</b><br/>
<form action="/api" method="POST" onsubmit="return submitForm(this);">
    <input type="hidden" name="requestType" value="getAssetMovements"/>
    <table>
        <tr>
            <td>Asset Id:</td>
            <td><input type="text" name="assetId"/></td>
        </tr>
        <tr>
            <td>Type [transfer / trade]:</td>
            <td><input type="text" name="type"/></td>
        </tr>
        <tr>
            <td colspan="2"><input type="submit" value="submit"/></td>
        </tr>
    </table>
    <div class="result"></div>
</form>
<hr>
<b>Get Asset Holders:</b><br/>
<form action="/api" method="POST" onsubmit="return submitForm(this);">
    <input type="hidden" name="requestType" value="getAssetHolders"/>
    <table>
        <tr>
            <td>Asset Id:</td>
            <td><input type="text" name="assetId"/></td>
        </tr>
        <tr>
            <td colspan="2"><input type="submit" value="submit"/></td>
        </tr>
    </table>
    <div class="result"></div>
</form>
<hr>
<div>Version 0.1 updated June 19th, 2014</div>
</body>
</html>